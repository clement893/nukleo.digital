<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1" />
    <title>Nukleo Digital</title>
    
    <!-- DNS prefetch and preconnect for faster loading -->
    <link rel="dns-prefetch" href="https://fonts.googleapis.com" />
    <link rel="dns-prefetch" href="https://fonts.gstatic.com" />
    <link rel="dns-prefetch" href="https://api.manus.im" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    
    <!-- Favicons -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json" />
    <meta name="theme-color" content="#7c3aed" />
    
    <!-- Preload critical fonts for better performance -->
    <link rel="preload" href="/fonts/AktivGrotesk-Regular.woff2" as="font" type="font/woff2" crossorigin />
    <link rel="preload" href="/fonts/AktivGrotesk-Medium.woff2" as="font" type="font/woff2" crossorigin />
    <link rel="preload" href="/fonts/AktivGrotesk-Bold.woff2" as="font" type="font/woff2" crossorigin />
    
    <!-- Preload LCP image (LEO avatar) -->
    <link rel="preload" href="/leo-avatar.webp" as="image" type="image/webp" fetchpriority="high" />
    
    <style>
      /* Loader Crazy Arts & Culture Style */
      #app-loader {
        position: fixed;
        inset: 0;
        background: linear-gradient(135deg, rgb(107,23,22) 0%, rgb(40,60,120) 50%, rgb(107,23,22) 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 9999;
        overflow: hidden;
      }

      /* Grain overlay animé */
      .loader-grain {
        position: absolute;
        inset: 0;
        background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='3.5' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
        opacity: 0.15;
        animation: grainMove 0.5s steps(10) infinite;
        pointer-events: none;
        mix-blend-mode: overlay;
      }

      @keyframes grainMove {
        0%, 100% { transform: translate(0, 0); }
        10% { transform: translate(-5%, -10%); }
        20% { transform: translate(-15%, 5%); }
        30% { transform: translate(7%, -25%); }
        40% { transform: translate(-5%, 25%); }
        50% { transform: translate(15%, 10%); }
        60% { transform: translate(15%, -15%); }
        70% { transform: translate(-10%, 15%); }
        80% { transform: translate(3%, -20%); }
        90% { transform: translate(-15%, -5%); }
      }

      /* Particules flottantes */
      .loader-particle {
        position: absolute;
        background: radial-gradient(circle, rgba(168, 85, 247, 0.8), rgba(236, 72, 153, 0.6));
        border-radius: 50%;
        pointer-events: none;
        animation: floatParticle linear infinite;
        box-shadow: 0 0 20px rgba(168, 85, 247, 0.8);
      }

      @keyframes floatParticle {
        0% {
          transform: translate(0, 0) scale(1);
          opacity: 0;
        }
        10% {
          opacity: 1;
        }
        90% {
          opacity: 1;
        }
        100% {
          transform: translate(var(--tx), var(--ty)) scale(0.5);
          opacity: 0;
        }
      }

      /* Hexagones rotatifs */
      .loader-hexagon {
        position: absolute;
        width: 100px;
        height: 100px;
        clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
        background: linear-gradient(135deg, rgba(168, 85, 247, 0.1), rgba(236, 72, 153, 0.1));
        border: 2px solid rgba(168, 85, 247, 0.3);
        animation: rotateHexagon linear infinite;
      }

      @keyframes rotateHexagon {
        from { transform: rotate(0deg) scale(1); }
        50% { transform: rotate(180deg) scale(1.1); }
        to { transform: rotate(360deg) scale(1); }
      }

      /* Logo container avec effets psychédéliques */
      .loader-logo-container {
        position: relative;
        z-index: 10;
        animation: logoFloat 3s ease-in-out infinite;
      }

      @keyframes logoFloat {
        0%, 100% {
          transform: translateY(0) scale(1) rotate(0deg);
        }
        25% {
          transform: translateY(-20px) scale(1.05) rotate(2deg);
        }
        50% {
          transform: translateY(0) scale(1.1) rotate(0deg);
        }
        75% {
          transform: translateY(-20px) scale(1.05) rotate(-2deg);
        }
      }

      /* Logo avec effets crazy */
      .loader-logo {
        width: 200px;
        height: 200px;
        filter: invert(1) 
                drop-shadow(0 0 40px rgba(168, 85, 247, 1)) 
                drop-shadow(0 0 80px rgba(236, 72, 153, 0.8)) 
                drop-shadow(0 0 120px rgba(34, 211, 238, 0.6));
        animation: logoPulse 2s ease-in-out infinite, logoGlitch 5s infinite;
      }

      @keyframes logoPulse {
        0%, 100% {
          filter: invert(1) 
                  drop-shadow(0 0 40px rgba(168, 85, 247, 1)) 
                  drop-shadow(0 0 80px rgba(236, 72, 153, 0.8)) 
                  drop-shadow(0 0 120px rgba(34, 211, 238, 0.6));
        }
        50% {
          filter: invert(1) 
                  drop-shadow(0 0 60px rgba(168, 85, 247, 1)) 
                  drop-shadow(0 0 120px rgba(236, 72, 153, 1)) 
                  drop-shadow(0 0 180px rgba(34, 211, 238, 0.8));
        }
      }

      @keyframes logoGlitch {
        0%, 90%, 100% {
          transform: translate(0, 0);
        }
        91% {
          transform: translate(-5px, 2px);
        }
        92% {
          transform: translate(5px, -2px);
        }
        93% {
          transform: translate(-3px, -3px);
        }
        94% {
          transform: translate(3px, 3px);
        }
        95% {
          transform: translate(0, 0);
        }
      }

      /* Ondes d'énergie */
      .loader-wave {
        position: absolute;
        border: 3px solid rgba(168, 85, 247, 0.5);
        border-radius: 50%;
        animation: waveExpand 3s ease-out infinite;
      }

      @keyframes waveExpand {
        0% {
          width: 200px;
          height: 200px;
          opacity: 1;
        }
        100% {
          width: 600px;
          height: 600px;
          opacity: 0;
        }
      }

      /* Texte de chargement avec glitch */
      .loader-text {
        position: absolute;
        bottom: 100px;
        font-size: 1.5rem;
        font-weight: bold;
        color: white;
        text-transform: uppercase;
        letter-spacing: 0.3em;
        animation: textGlitch 3s infinite;
        text-shadow: 
          0 0 10px rgba(168, 85, 247, 0.8),
          0 0 20px rgba(236, 72, 153, 0.6),
          0 0 30px rgba(34, 211, 238, 0.4);
      }

      @keyframes textGlitch {
        0%, 90%, 100% {
          transform: translate(0, 0);
          text-shadow: 
            0 0 10px rgba(168, 85, 247, 0.8),
            0 0 20px rgba(236, 72, 153, 0.6),
            0 0 30px rgba(34, 211, 238, 0.4);
        }
        91% {
          transform: translate(-3px, 0);
          text-shadow: 
            -3px 0 10px rgba(255, 0, 0, 0.8),
            3px 0 10px rgba(0, 255, 255, 0.8);
        }
        93% {
          transform: translate(3px, 0);
          text-shadow: 
            3px 0 10px rgba(255, 0, 0, 0.8),
            -3px 0 10px rgba(0, 255, 255, 0.8);
        }
        95% {
          transform: translate(0, 0);
          text-shadow: 
            0 0 10px rgba(168, 85, 247, 0.8),
            0 0 20px rgba(236, 72, 153, 0.6),
            0 0 30px rgba(34, 211, 238, 0.4);
        }
      }

      /* Barre de progression psychédélique */
      .loader-progress {
        position: absolute;
        bottom: 50px;
        width: 300px;
        height: 4px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 2px;
        overflow: hidden;
      }

      .loader-progress-bar {
        height: 100%;
        background: linear-gradient(90deg, 
          rgba(168, 85, 247, 1) 0%, 
          rgba(236, 72, 153, 1) 50%, 
          rgba(34, 211, 238, 1) 100%);
        background-size: 200% 100%;
        animation: progressShimmer 2s linear infinite, progressFill 3s ease-out forwards;
        box-shadow: 0 0 20px rgba(168, 85, 247, 0.8);
      }

      @keyframes progressShimmer {
        0% { background-position: 200% 0; }
        100% { background-position: -200% 0; }
      }

      @keyframes progressFill {
        0% { width: 0%; }
        100% { width: 100%; }
      }

      /* Fade out du loader */
      .loader-fade-out {
        animation: fadeOut 0.5s ease-out forwards;
      }

      @keyframes fadeOut {
        to {
          opacity: 0;
          visibility: hidden;
        }
      }
    </style>
  </head>

  <body>
    <!-- Loader Crazy Arts & Culture -->
    <div id="app-loader">
      <!-- Grain animé -->
      <div class="loader-grain"></div>

      <!-- Particules flottantes (30 particules) -->
      <script>
        for (let i = 0; i < 30; i++) {
          const particle = document.createElement('div');
          particle.className = 'loader-particle';
          const size = Math.random() * 6 + 3;
          const startX = Math.random() * window.innerWidth;
          const startY = Math.random() * window.innerHeight;
          const endX = (Math.random() - 0.5) * 400;
          const endY = (Math.random() - 0.5) * 400;
          const duration = Math.random() * 3 + 2;
          const delay = Math.random() * 2;
          
          particle.style.width = size + 'px';
          particle.style.height = size + 'px';
          particle.style.left = startX + 'px';
          particle.style.top = startY + 'px';
          particle.style.setProperty('--tx', endX + 'px');
          particle.style.setProperty('--ty', endY + 'px');
          particle.style.animationDuration = duration + 's';
          particle.style.animationDelay = delay + 's';
          
          document.getElementById('app-loader').appendChild(particle);
        }
      </script>

      <!-- Hexagones rotatifs -->
      <div class="loader-hexagon" style="top: 20%; left: 15%; animation-duration: 8s;"></div>
      <div class="loader-hexagon" style="top: 60%; right: 20%; width: 150px; height: 150px; animation-duration: 10s; animation-direction: reverse;"></div>
      <div class="loader-hexagon" style="bottom: 15%; left: 25%; width: 80px; height: 80px; animation-duration: 6s;"></div>

      <!-- Ondes d'énergie -->
      <div class="loader-wave" style="animation-delay: 0s;"></div>
      <div class="loader-wave" style="animation-delay: 0.6s;"></div>
      <div class="loader-wave" style="animation-delay: 1.2s;"></div>
      <div class="loader-wave" style="animation-delay: 1.8s;"></div>
      <div class="loader-wave" style="animation-delay: 2.4s;"></div>

      <!-- Logo avec effets psychédéliques -->
      <div class="loader-logo-container">
        <img src="/nukleo-logo.svg" alt="Nukleo" class="loader-logo" />
      </div>

      <!-- Texte de chargement -->
      <div class="loader-text">Loading</div>

      <!-- Barre de progression -->
      <div class="loader-progress">
        <div class="loader-progress-bar"></div>
      </div>
    </div>

    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    
    <script>
      // Hide loader when app is ready (minimum 3 seconds)
      const minDisplayTime = 3000;
      const startTime = Date.now();
      
      window.addEventListener('load', () => {
        const elapsed = Date.now() - startTime;
        const remaining = Math.max(0, minDisplayTime - elapsed);
        
        setTimeout(() => {
          const loader = document.getElementById('app-loader');
          if (loader) {
            loader.classList.add('loader-fade-out');
            setTimeout(() => {
              loader.style.display = 'none';
            }, 500);
          }
        }, remaining);
      });
    </script>
  </body>
</html>
